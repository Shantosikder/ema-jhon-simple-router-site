{"ast":null,"code":"import _toConsumableArray from\"C:/Users/SHANTO/Documents/Milestone 8/Modiul 50/ema-john-simple/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/SHANTO/Documents/Milestone 8/Modiul 50/ema-john-simple/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./Shop.css';import Product from'../Product/Product';import Card from'../Card/Card';import{addToDb,getShoppingCart}from'../../utilities/fakedb';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),card=_useState4[0],setCard=_useState4[1];useEffect(function(){fetch('products.json').then(function(res){return res.json();}).then(function(data){return setProduct(data);});},[]);useEffect(function(){var storeCard=getShoppingCart();// console.log(storeCard)\n// console.log(products)\nvar saveCard=[];//step 1: get id\nif(storeCard){var _loop=function _loop(id){console.log(id);//step 2: get the product by using id\nvar addedProduct=products.find(function(product){return product.id==id;});console.log({addedProduct:addedProduct});//step 3: get quantity of product \nif(addedProduct){var quantity=storeCard[id];addedProduct.quantity=quantity;saveCard.push(addedProduct);}// console.log(addedProduct);    \n};for(var id in storeCard){_loop(id);}}setCard(saveCard);},[products]);var handleAddToCard=function handleAddToCard(product){var newCard=[];// const newCard = [...card, product];\nvar exists=card.find(function(pd){return pd.id===product.id;});if(!exists){product.quantity=1;newCard=[].concat(_toConsumableArray(card),[product]);}else{exists.Product=exists.product+1;var remaining=card.filter(function(pd){return pd.id!==product.id;});newCard=[].concat(_toConsumableArray(remaining),[exists]);}setCard(newCard);addToDb(product.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products-container\",children:products.map(function(product){return/*#__PURE__*/_jsx(Product,{product:product,handleAddToCard:handleAddToCard},product.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:/*#__PURE__*/_jsx(Card,{card:card})})]});};export default Shop;","map":{"version":3,"names":["React","useEffect","useState","Product","Card","addToDb","getShoppingCart","jsx","_jsx","jsxs","_jsxs","Shop","_useState","_useState2","_slicedToArray","products","setProduct","_useState3","_useState4","card","setCard","fetch","then","res","json","data","storeCard","saveCard","_loop","id","console","log","addedProduct","find","product","quantity","push","handleAddToCard","newCard","exists","pd","concat","_toConsumableArray","remaining","filter","className","children","map"],"sources":["C:/Users/SHANTO/Documents/Milestone 8/Modiul 50/ema-john-simple/src/components/Shop/Shop.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './Shop.css';\r\nimport Product from '../Product/Product';\r\nimport Card from '../Card/Card';\r\nimport { addToDb, getShoppingCart } from '../../utilities/fakedb';\r\n\r\n\r\nconst Shop = () => {\r\n    const [products, setProduct] = useState([]);\r\n    const [card, setCard] = useState([]);\r\n    useEffect(() =>{\r\n      fetch('products.json')\r\n      .then(res=> res.json())\r\n      .then(data => setProduct(data))\r\n    }, []);\r\n\r\n    useEffect( ()=>{\r\n        const storeCard = getShoppingCart();\r\n        // console.log(storeCard)\r\n        // console.log(products)\r\n        const saveCard = [];\r\n        //step 1: get id\r\n       if(storeCard){\r\n        for(const id in storeCard){\r\n            console.log(id)\r\n            //step 2: get the product by using id\r\n            const addedProduct = products.find(product => product.id == id);\r\n            console.log({addedProduct})\r\n            //step 3: get quantity of product \r\n           if(addedProduct){\r\n            const quantity = storeCard[id];\r\n            addedProduct.quantity = quantity;\r\n            saveCard.push(addedProduct);\r\n           }\r\n            // console.log(addedProduct);    \r\n            }\r\n       }\r\n       setCard(saveCard);\r\n    }, [products]);\r\n\r\n    const handleAddToCard = (product) =>{\r\n        let newCard = [];\r\n        // const newCard = [...card, product];\r\n        const exists = card.find(pd => pd.id === product.id);\r\n        if(!exists){\r\n            product.quantity =1;\r\n            newCard = [...card, product];\r\n        }else{\r\n            exists.Product = exists.product+1;\r\n            const remaining = card.filter(pd=>pd.id !==product.id);\r\n            newCard = [...remaining, exists];\r\n        }\r\n        setCard(newCard);\r\n        addToDb(product.id);\r\n    }\r\n\r\n    return (\r\n        <div className='shop-container'>\r\n            <div className=\"products-container\">\r\n        {\r\n            products.map(product => <Product\r\n            key={product.id}\r\n            product={product}\r\n            handleAddToCard={handleAddToCard}\r\n            ></Product>)\r\n        }\r\n        </div>\r\n        <div className=\"card-container\">\r\n        <Card card={card}></Card>\r\n        </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Shop;"],"mappings":"kTAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,YAAY,CACnB,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,OAASC,OAAO,CAAEC,eAAe,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGlE,GAAM,CAAAC,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAA,CAAS,CACf,IAAAC,SAAA,CAA+BV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,QAAQ,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC3B,IAAAI,UAAA,CAAwBf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpBjB,SAAS,CAAC,UAAK,CACboB,KAAK,CAAC,eAAe,CAAC,CACrBC,IAAI,CAAC,SAAAC,GAAG,QAAG,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACtBF,IAAI,CAAC,SAAAG,IAAI,QAAI,CAAAT,UAAU,CAACS,IAAI,CAAC,GAAC,CACjC,CAAC,CAAE,EAAE,CAAC,CAENxB,SAAS,CAAE,UAAI,CACX,GAAM,CAAAyB,SAAS,CAAGpB,eAAe,CAAC,CAAC,CACnC;AACA;AACA,GAAM,CAAAqB,QAAQ,CAAG,EAAE,CACnB;AACD,GAAGD,SAAS,CAAC,KAAAE,KAAA,UAAAA,MAAAC,EAAA,CACc,CACtBC,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CACf;AACA,GAAM,CAAAG,YAAY,CAAGjB,QAAQ,CAACkB,IAAI,CAAC,SAAAC,OAAO,QAAI,CAAAA,OAAO,CAACL,EAAE,EAAIA,EAAE,GAAC,CAC/DC,OAAO,CAACC,GAAG,CAAC,CAACC,YAAY,CAAZA,YAAY,CAAC,CAAC,CAC3B;AACD,GAAGA,YAAY,CAAC,CACf,GAAM,CAAAG,QAAQ,CAAGT,SAAS,CAACG,EAAE,CAAC,CAC9BG,YAAY,CAACG,QAAQ,CAAGA,QAAQ,CAChCR,QAAQ,CAACS,IAAI,CAACJ,YAAY,CAAC,CAC5B,CACC;AACA,CAAC,CAZL,IAAI,GAAM,CAAAH,EAAE,GAAI,CAAAH,SAAS,EAAAE,KAAA,CAAAC,EAAA,GAa1B,CACAT,OAAO,CAACO,QAAQ,CAAC,CACpB,CAAC,CAAE,CAACZ,QAAQ,CAAC,CAAC,CAEd,GAAM,CAAAsB,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIH,OAAO,CAAI,CAChC,GAAI,CAAAI,OAAO,CAAG,EAAE,CAChB;AACA,GAAM,CAAAC,MAAM,CAAGpB,IAAI,CAACc,IAAI,CAAC,SAAAO,EAAE,QAAI,CAAAA,EAAE,CAACX,EAAE,GAAKK,OAAO,CAACL,EAAE,GAAC,CACpD,GAAG,CAACU,MAAM,CAAC,CACPL,OAAO,CAACC,QAAQ,CAAE,CAAC,CACnBG,OAAO,IAAAG,MAAA,CAAAC,kBAAA,CAAOvB,IAAI,GAAEe,OAAO,EAAC,CAChC,CAAC,IAAI,CACDK,MAAM,CAACpC,OAAO,CAAGoC,MAAM,CAACL,OAAO,CAAC,CAAC,CACjC,GAAM,CAAAS,SAAS,CAAGxB,IAAI,CAACyB,MAAM,CAAC,SAAAJ,EAAE,QAAE,CAAAA,EAAE,CAACX,EAAE,GAAIK,OAAO,CAACL,EAAE,GAAC,CACtDS,OAAO,IAAAG,MAAA,CAAAC,kBAAA,CAAOC,SAAS,GAAEJ,MAAM,EAAC,CACpC,CACAnB,OAAO,CAACkB,OAAO,CAAC,CAChBjC,OAAO,CAAC6B,OAAO,CAACL,EAAE,CAAC,CACvB,CAAC,CAED,mBACInB,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3BtC,IAAA,QAAKqC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAEnC/B,QAAQ,CAACgC,GAAG,CAAC,SAAAb,OAAO,qBAAI1B,IAAA,CAACL,OAAO,EAEhC+B,OAAO,CAAEA,OAAQ,CACjBG,eAAe,CAAEA,eAAgB,EAF5BH,OAAO,CAACL,EAGH,CAAC,GAAC,CAEX,CAAC,cACNrB,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC/BtC,IAAA,CAACJ,IAAI,EAACe,IAAI,CAAEA,IAAK,CAAO,CAAC,CACpB,CAAC,EACD,CAAC,CAEd,CAAC,CAED,cAAe,CAAAR,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}